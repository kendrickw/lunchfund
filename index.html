<!DOCTYPE html>
<!-- Offline Caching
<html lang="en" manifest="offline.appcache">
-->
<html>

   <head>
      <title>LunchFund Calculator</title>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <meta name="apple-mobile-web-app-capable" content="yes"/>

      <link rel="apple-touch-icon" sizes="57x57" href="images/icon-iphone-57.png" />
      <link rel="apple-touch-icon" sizes="72x72" href="images/icon-ipad-72.png" />
      <link rel="apple-touch-icon" sizes="114x114" href="images/icon-iphone-114.png" />
      <link rel="apple-touch-icon" sizes="144x144" href="images/icon-ipad-144.png" />
      <link rel="apple-touch-icon-precomposed" href="images/icon-iphone-114.png"/>

      <link media="(device-width: 320px)" rel="apple-touch-startup-image"
      href="images/splash-iphone-320-460.png" />
      <link media="(device-width: 320px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"
      href="images/splash-iphone-640-920.png" />
      <link media="screen (min-device-width: 481px) and (max-device-width: 1024px) and (orientation: portrait)" rel="apple-touch-startup-image"
      href="images/splash-ipad-748-1024.png" />
      <link media="screen (min-device-width: 481px) and (max-device-width: 1024px) and (orientation: landscape)" rel="apple-touch-startup-image"
      href="images/splash-ipad-1004-768.png" />
      <link media="screen (min-device-width: 481px) and (max-device-width: 1024px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"
      href="images/splash-ipad-1536-2008.png" />
      <link media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"
      href="images/splash-ipad-2048-1496.png" />

      <link rel="stylesheet" href="jquery/jquery.mobile-1.2.0.min.css" />
      <link rel="stylesheet" href="jquery/jqm-icon-pack-2.0-original.css" />
      <link rel="stylesheet" href="jquery/jqm-datebox-1.1.0.min.css" />
      <link rel="stylesheet" href="css/lunchfund.css" />

      <!-- To make this work on a local machine, add http: in front of //ajax..
       <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
       -->
      <script type="text/javascript" src="jquery/jquery-1.8.3.min.js"></script>
      <script type="text/javascript" src="jquery/jquery.mobile-1.2.0.min.js"></script>
      <script type="text/javascript" src="jquery/jquery.formatCurrency-1.4.0.min.js"></script>
      <script type="text/javascript" src="jquery/jqm-datebox-1.1.0.comp.calbox.min.js"></script>
      <script type="text/javascript" src="jquery/jquery.flot.js"></script>
      <script type="text/javascript" src="jquery/jquery.flot.pie.js"></script>
   </head>

   <body>

      <!-----------
       Main Page
       To change color, add data-theme="a" (black), "b" (blue), etc..
       ------------->
      <div data-role="page" id="homePage">

         <div data-theme="a" data-role="header" data-position="">
            <h1>LF Calc v0.8.9</h1>
	    <div data-role="navbar" data-iconpos="left">
              <ul>
                <li><a href="#" data-transition="fade" data-icon="home"
		       class="ui-btn-active ui-state-persist">Home</a></li>
                <li><a href="#summaryPage" data-transition="fade" data-icon="dollar">Summary</a></li>
                <li><a href="#settingsPage" data-transition="fade" data-icon="wrench">Settings</a></li>
              </ul>
            </div>
         </div>

         <div data-role="content">

            <!-- Show number of participants and allow list customization -->
            <ul data-role="listview" data-inset="true" data-theme="b" data-divider-theme="d">
               <li data-role="list-divider">Select Lunchers:</li>
               <li><a href="#peoplePage" data-transition="slide">
                  <!-- Dynamically generated. Populated by drawParticipantText() -->
        	  <h3 style="white-space:normal"><span id="participantlisttext"></span></h3>
                  <p class="ui-li-aside"><span class="ui-li-count" id="participantcounttext"></span></p>
               </a></li>
            </ul>

            <!-- Meal calculator -->
            <ul data-role="listview" data-inset="true">
              <!-- Bill Amount -->
              <li>
                <table style="width: 100%"><tr>
                  <td>Bill Amount:</td>
                  <td style="text-align:right">$</td>
                  <td><input type="number" step="any" min="0" value="0.00" pattern="[0-9]*" id="billamountinput" /></td>
                </tr></table>
              </li>

              <!-- Tip -->
              <li>
                Tips (<span id="tipspercenttext"></span>%):
                <span class="ui-li-aside" id="tipstext1"></span>
              </li>

              <!-- Meal Total -->
              <li>
                Meal Total:
                <span class="ui-li-aside" id="mealtotaltext"></span>
              </li>

              <!-- Each Pays -->
              <li>
                Each Pays:
                <span class="ui-li-aside" id="eachpaystext"></span>
              </li>

              <!-- Lunch Fund -->
              <li>
                <a href="#">Lunch Fund:
                  <span class="ui-li-aside" id="lunchfundtext1"></span>
                </a>
                <!-- To disable button, add: class="ui-disabled" -->
                <a href="#lunchfundpopup" data-icon="edit" data-rel="popup">Edit</a>

                <div data-role="popup" id="lunchfundpopup" class="ui-content" data-theme="a" data-overlay-theme="a">
                  <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete"
                    data-iconpos="notext" class="ui-btn-left">Close</a>
                  <table><tr>
                    <td><a href="#" data-role="button" data-icon="minus" data-theme="b"
                          data-iconpos="notext" id="lunchfundminus"></a></td>
                    <td><span id="lunchfundtext2"></span></td>
                    <td><a href="#" data-role="button" data-icon="plus" data-theme="b"
                          data-iconpos="notext" id="lunchfundplus"></a></td>
                  </tr></table>
                </div>
              </li>

            </ul>

	    <!-- Submission Dialog -->
	    <table style="width: 100%">
	       <!-- Fund holder -->
	       <tr>
		  <td style="width: 30%">
		     <label for="fundholderselect">
		        Fund Holder:
		     </label>
		  </td>
		  <td>
		     <select id="fundholderselect">
		     <!-- Dynamically created content. Populated by drawSelectMenu() -->
		     </select>
		  </td>
	       </tr>

	       <!-- Submitter Name -->
	       <tr id="submitterfield">
		  <td style="width: 30%">
		     <label for="submitterselect">
		        Submitter:
		     </label>
		  </td>
		  <td>
		     <select id="submitterselect">
		     <!-- Dynamically created content. Populated by drawSelectMenu() -->
		     </select>
		  </td>
	       </tr>
	    </table>

            <!-- Google Form submission logic,
             hides the submission feedback screen -->
            <script type="text/javascript">var submitted=false;</script>
            <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"
               onload="if (submitted) {submittedGoogleForm();}">
            </iframe>
            <form onsubmit="submitted = syncGoogleForm(); return submitted;"
               action="https://docs.google.com/spreadsheet/formResponse?formkey=dHV4QmMtdmpUbWcxOHJpZFhwSGxUbWc6MQ&amp;embedded=true&amp;ifq"
               method="POST" id="ss-form" target="hidden_iframe" data-ajax="false">
	       <div id="googleforminput">
               <!-- Dynamically created content. Populated by drawGoogleFormChkBox() -->
	       </div>
               <!-- Lunch Fund amount -->
               <input type="text" style="display:none;" name="entry.1.single" value="" class="ss-q-short" id="entry_1"/>
               <!-- Name of person holding the fund -->
               <input type="text" style="display:none;" name="entry.2.single" value="" class="ss-q-short" id="entry_2"/>
               <!-- Name of submitter -->
               <input type="text" style="display:none;" name="entry.3.single" value="" class="ss-q-short" id="entry_3"/>
               <!-- Event Date -->
               <input type="text" style="display:none;" name="entry.4.single" value="" class="ss-q-short" id="entry_4"/>
               <!-- submission button -->
               <input type="submit" name="submit" data-theme="e" data-icon="wifi" data-iconpos="right" value="Submit to Google Doc"/>
            </form>

         </div> <!-- end of homePage content -->

      </div> <!-- end of homePage proper-->

      <!-----------
       Lunch People selection Page
       ------------>
      <div data-role="page" id="peoplePage">

         <div data-theme="a" data-role="header" data-position="">
            <a href="#" data-rel="back" data-icon="back" data-transition="slide" data-direction="reverse"
	       id="peopletomainbutton">
               Back
            </a>
            <h1>Participants</h1>
         </div>

         <div data-role="content">

            <div data-role="fieldcontain">
               <fieldset data-role="controlgroup" data-type="vertical" id="peoplelistcheckboxes">
                  <!-- Dynamically created content. Populated by drawAppFormChkBox() -->
               </fieldset>
            </div>

         </div> <!-- end of peoplePage content -->

      </div> <!-- end of peoplePage proper-->

      <!-----------
       Summary Page
       ------------->
      <div data-role="page" id="summaryPage">

         <div data-theme="a" data-role="header" data-position="">
            <h1>Summary</h1>
	    <div data-role="navbar" data-iconpos="left">
              <ul>
                <li><a href="#homePage" data-transition="fade" data-icon="home">Home</a></li>
                <li><a href="#" data-transition="fade" data-icon="dollar"
		       class="ui-btn-active ui-state-persist">Summary</a></li>
                <li><a href="#settingsPage" data-transition="fade" data-icon="wrench">Settings</a></li>
              </ul>
            </div>
         </div>

         <div data-role="content">

            <!-- fund summary -->
            <ul data-role="listview" data-inset="true" data-divider-theme="d">
               <li data-role="list-divider">Data retrieved from:<br><span id="timeofstat"></span></li>
	       <li>Fund Book Value:
		  <span class="ui-li-aside" id="fundvaluetext"></span>
               </li>
	       <li>Your Share:
		  <span class="ui-li-aside" id="submittersharetext"></span>
	       </li>
	       <li>Your Share Value:
		  <span class="ui-li-aside" id="submittersharevaluetext"></span>
	       </li>
            </ul>

            <!-- Piechart of holding percentage -->
            <div class="center-wrapper">
              <div id="piechart1" style="width:300px;height:300px;"></div>
            </div>

         </div>

      </div> <!-- end of summaryPage proper-->

      <!-------------
       Settings Page
       ------------->
      <div data-role="page" id="settingsPage">

         <div data-theme="a" data-role="header" data-position="">
            <h1>Settings</h1>
	    <div data-role="navbar" data-iconpos="left">
              <ul>
                <li><a href="#homePage" data-transition="fade" data-icon="home">Home</a></li>
                <li><a href="#summaryPage" data-transition="fade" data-icon="dollar">Summary</a></li>
                <li><a href="#" data-transition="fade" data-icon="wrench"
		       class="ui-btn-active ui-state-persist">Settings</a></li>
              </ul>
            </div>
         </div>

         <div data-role="content">

	    <!-- Button group -->
	    <div data-role="controlgroup">
	       <a data-theme="d" data-role="button" href="#"
		  data-icon="delete" data-iconpos="right"
		  id="clearlocalstoragebutton">
		  Clear local storage
	       </a>
	       <a data-theme="d" data-role="button" href="#"
		  data-icon="refresh" data-iconpos="right"
		  id="refreshdatabutton">
		  Refresh data from Google
	       </a>
	    </div>

	    <table style="width: 100%">
	       <!-- event date -->
	       <tr>
		  <td style="width: 30%">
		     <label for="eventdate">
		        Event Date:
		     </label>
		  </td>
		  <td>
                    <input name="eventdate" id="eventdate" type="text"
	                 data-role="datebox" data-theme="b"
	                 data-options='{"mode": "calbox", "beforeToday": true, "useFocus": true}'/>
		  </td>
	       </tr>
	    </table>

	    <div data-role="fieldcontain">
               <fieldset data-role="controlgroup" data-type="vertical">
                  <label for="showsubmitterchkbox">
		     Show Submitter
		  </label>
		  <input type="checkbox" id="showsubmitterchkbox" checked="checked"/>
               </fieldset>
            </div>

         </div>

         <div data-theme="a" data-role="footer" data-position="fixed">
            <div style="margin:8px 8px 8px 8px;">
               &copy; 2013 Lunch Group
            </div>
         </div>

      </div> <!-- end of settingsPage proper-->

   </body>

   <script type="text/javascript" src="js/modernizr.min.js"></script>
   <script type="text/javascript" src="js/lunchfund.js"></script>

</html>
